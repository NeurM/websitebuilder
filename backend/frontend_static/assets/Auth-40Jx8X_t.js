import{u as y,q as N,a as C,r as u,j as e,N as F,b as S,d as T,e as L,f as P,g as A,h as R,i as k,k as x,l as v,m as l,I as c,B as h,F as I}from"./index-D-_3EX_r.js";import{g as q,s as E,a as B}from"./authService-DdAC_fmd.js";const U=()=>{const o=y();N();const{toast:t}=C(),[d,m]=u.useState(!1),p=[{name:"Home",path:"/tradecraft"},{name:"About",path:"/tradecraft/about"},{name:"Services",path:"/tradecraft/services"},{name:"Blog",path:"/tradecraft/blog"},{name:"Contact",path:"/tradecraft/contact"}],j={address:"123 Trade Street, Tradeville, TV 12345",phone:"(555) 456-7890",email:"info@tradecraft.com"},[i,f]=u.useState({email:"",password:""}),[r,g]=u.useState({email:"",password:"",confirmPassword:""});u.useEffect(()=>{(async()=>{const{data:s}=await q();s.user&&o("/tradecraft")})()},[o]);const b=async a=>{a.preventDefault(),m(!0);try{const{data:s,error:n}=await E(i.email,i.password);n?t({title:"Login Failed",description:n.message,variant:"destructive"}):s&&(t({title:"Login Successful",description:"Welcome back!"}),o("/tradecraft"))}catch(s){console.error("Login error:",s),t({title:"Login Failed",description:"An unexpected error occurred",variant:"destructive"})}finally{m(!1)}},w=async a=>{if(a.preventDefault(),r.password!==r.confirmPassword){t({title:"Registration Failed",description:"Passwords do not match",variant:"destructive"});return}m(!0);try{const{data:s,error:n}=await B(r.email,r.password);n?t({title:"Registration Failed",description:n.message,variant:"destructive"}):(t({title:"Registration Successful",description:"Check your email for a confirmation link to complete your registration."}),s!=null&&s.user&&!s.session&&t({title:"Note",description:"For development, you might want to disable email confirmation in the Supabase dashboard."}),s!=null&&s.session&&o("/tradecraft"))}catch(s){console.error("Registration error:",s),t({title:"Registration Failed",description:"An unexpected error occurred",variant:"destructive"})}finally{m(!1)}};return e.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[e.jsx(F,{logo:"Trade<span class='text-blue-600'>Craft</span>",basePath:"tradecraft",navItems:p}),e.jsx("div",{className:"flex-grow",children:e.jsxs("div",{className:"container mx-auto px-6 py-16",children:[e.jsx("h1",{className:"text-3xl font-bold text-center mb-10",children:"Account Access"}),e.jsx("div",{className:"max-w-md mx-auto",children:e.jsxs(S,{children:[e.jsxs(T,{className:"text-center",children:[e.jsx(L,{className:"text-2xl font-bold",children:"Welcome"}),e.jsx(P,{children:"Sign in or create an account to access TradeCraft services"})]}),e.jsxs(A,{children:[e.jsxs(R,{defaultValue:"login",className:"w-full",children:[e.jsxs(k,{className:"grid w-full grid-cols-2 mb-8",children:[e.jsx(x,{value:"login",children:"Login"}),e.jsx(x,{value:"register",children:"Register"})]}),e.jsx(v,{value:"login",children:e.jsxs("form",{onSubmit:b,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"login-email",children:"Email"}),e.jsx(c,{id:"login-email",type:"email",placeholder:"your@email.com",value:i.email,onChange:a=>f({...i,email:a.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"login-password",children:"Password"}),e.jsx(c,{id:"login-password",type:"password",value:i.password,onChange:a=>f({...i,password:a.target.value}),required:!0})]}),e.jsx(h,{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700",disabled:d,children:d?"Signing in...":"Sign In"})]})}),e.jsx(v,{value:"register",children:e.jsxs("form",{onSubmit:w,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"register-email",children:"Email"}),e.jsx(c,{id:"register-email",type:"email",placeholder:"your@email.com",value:r.email,onChange:a=>g({...r,email:a.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"register-password",children:"Password"}),e.jsx(c,{id:"register-password",type:"password",value:r.password,onChange:a=>g({...r,password:a.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"register-confirm-password",children:"Confirm Password"}),e.jsx(c,{id:"register-confirm-password",type:"password",value:r.confirmPassword,onChange:a=>g({...r,confirmPassword:a.target.value}),required:!0})]}),e.jsx(h,{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700",disabled:d,children:d?"Creating account...":"Create Account"})]})})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx(h,{variant:"outline",onClick:()=>o("/tradecraft"),className:"w-full",children:"Back to TradeCraft"})})]})]})})]})}),e.jsx(I,{logo:"TradeCraft",description:"Your trusted partner for professional trade services.",basePath:"tradecraft",navItems:p,contactInfo:j})]})};export{U as default};
//# sourceMappingURL=Auth-40Jx8X_t.js.map
