import{u as j,a as y,r as u,j as e,b,d as N,e as C,f as F,g as S,h as L,i as P,k as x,l as f,m as l,I as c,B as p}from"./index-D-_3EX_r.js";import{g as R,s as k,a as T}from"./authService-DdAC_fmd.js";const E=()=>{const o=j(),{toast:i}=y(),[d,m]=u.useState(!1),[t,h]=u.useState({email:"",password:""}),[a,g]=u.useState({email:"",password:"",confirmPassword:""});u.useEffect(()=>{(async()=>{const{data:s}=await R();s.user&&o("/")})()},[o]);const v=async r=>{r.preventDefault(),m(!0);try{const{data:s,error:n}=await k(t.email,t.password);n?i({title:"Login Failed",description:n.message,variant:"destructive"}):s&&(i({title:"Login Successful",description:"Welcome back!"}),o("/"))}catch(s){console.error("Login error:",s),i({title:"Login Failed",description:"An unexpected error occurred",variant:"destructive"})}finally{m(!1)}},w=async r=>{if(r.preventDefault(),a.password!==a.confirmPassword){i({title:"Registration Failed",description:"Passwords do not match",variant:"destructive"});return}m(!0);try{const{data:s,error:n}=await T(a.email,a.password);n?i({title:"Registration Failed",description:n.message,variant:"destructive"}):(i({title:"Registration Successful",description:"Check your email for a confirmation link to complete your registration."}),s!=null&&s.user&&!s.session&&i({title:"Note",description:"For development, you might want to disable email confirmation in the Supabase dashboard."}),s!=null&&s.session&&o("/"))}catch(s){console.error("Registration error:",s),i({title:"Registration Failed",description:"An unexpected error occurred",variant:"destructive"})}finally{m(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-b from-gray-50 to-gray-100 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs(b,{className:"w-full max-w-md",children:[e.jsxs(N,{className:"text-center",children:[e.jsx(C,{className:"text-3xl font-bold",children:"Welcome"}),e.jsx(F,{children:"Sign in or create an account to save your website configurations"})]}),e.jsxs(S,{children:[e.jsxs(L,{defaultValue:"login",className:"w-full",children:[e.jsxs(P,{className:"grid w-full grid-cols-2 mb-8",children:[e.jsx(x,{value:"login",children:"Login"}),e.jsx(x,{value:"register",children:"Register"})]}),e.jsx(f,{value:"login",children:e.jsxs("form",{onSubmit:v,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"login-email",children:"Email"}),e.jsx(c,{id:"login-email",type:"email",placeholder:"your@email.com",value:t.email,onChange:r=>h({...t,email:r.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"login-password",children:"Password"}),e.jsx(c,{id:"login-password",type:"password",value:t.password,onChange:r=>h({...t,password:r.target.value}),required:!0})]}),e.jsx(p,{type:"submit",className:"w-full",disabled:d,children:d?"Signing in...":"Sign In"})]})}),e.jsx(f,{value:"register",children:e.jsxs("form",{onSubmit:w,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"register-email",children:"Email"}),e.jsx(c,{id:"register-email",type:"email",placeholder:"your@email.com",value:a.email,onChange:r=>g({...a,email:r.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"register-password",children:"Password"}),e.jsx(c,{id:"register-password",type:"password",value:a.password,onChange:r=>g({...a,password:r.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"register-confirm-password",children:"Confirm Password"}),e.jsx(c,{id:"register-confirm-password",type:"password",value:a.confirmPassword,onChange:r=>g({...a,confirmPassword:r.target.value}),required:!0})]}),e.jsx(p,{type:"submit",className:"w-full",disabled:d,children:d?"Creating account...":"Create Account"})]})})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx(p,{variant:"outline",onClick:()=>o("/"),className:"w-full",children:"Back to Templates"})})]})]})})};export{E as default};
//# sourceMappingURL=Auth-DAZ2wyDj.js.map
