{"version":3,"file":"About-Cz_kUis2.js","sources":["../../../src/hooks/useWebsiteVisitAnalytics.tsx","../../../src/templates/service/About.tsx"],"sourcesContent":["\nimport { useEffect } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport { supabase } from '@/integrations/supabase/client';\nimport { useAuth } from '@/context/AuthContext';\n\ntype EventType = 'pageview' | 'click' | 'scroll' | 'exit';\n\ninterface AnalyticsEvent {\n  user_id?: string;\n  template_id: string;\n  event_type: EventType;\n  page_path: string;\n  element_type?: string;\n  element_id?: string;\n  element_class?: string;\n  element_text?: string;\n  scroll_depth?: number;\n  event_data?: any;\n  session_id: string;\n  timestamp: string;\n}\n\nexport const useWebsiteVisitAnalytics = (isTemplate = false, templateId?: string) => {\n  const location = useLocation();\n  const { user } = useAuth();\n  \n  // Track pageviews\n  useEffect(() => {\n    const trackPageview = async () => {\n      if (!isTemplate || !templateId) return;\n      \n      try {\n        const analyticsData: AnalyticsEvent = {\n          user_id: user?.id,\n          template_id: templateId,\n          event_type: 'pageview',\n          page_path: location.pathname,\n          timestamp: new Date().toISOString(),\n          session_id: generateSessionId()\n        };\n        \n        await supabase\n          .from('website_analytics')\n          .insert([analyticsData]);\n          \n        // Store in sessionStorage for demo purposes\n        const analytics = JSON.parse(sessionStorage.getItem('website_analytics') || '[]');\n        analytics.push(analyticsData);\n        sessionStorage.setItem('website_analytics', JSON.stringify(analytics));\n      } catch (error) {\n        console.error('Error tracking pageview:', error);\n      }\n    };\n    \n    trackPageview();\n  }, [location.pathname, user, isTemplate, templateId]);\n\n  // Helper function to generate session ID\n  const generateSessionId = (): string => {\n    const existingSessionId = sessionStorage.getItem('analytics_session_id');\n    if (existingSessionId) {\n      return existingSessionId;\n    }\n    \n    const newSessionId = Math.random().toString(36).substring(2) + Date.now().toString(36);\n    sessionStorage.setItem('analytics_session_id', newSessionId);\n    return newSessionId;\n  };\n\n  return {\n    trackEvent: async (eventType: string, eventData: any) => {\n      if (!isTemplate || !templateId) return;\n      \n      try {\n        const analyticsData: AnalyticsEvent = {\n          user_id: user?.id,\n          template_id: templateId,\n          event_type: eventType as EventType,\n          page_path: location.pathname,\n          event_data: eventData,\n          timestamp: new Date().toISOString(),\n          session_id: generateSessionId()\n        };\n        \n        await supabase\n          .from('website_analytics')\n          .insert([analyticsData]);\n      } catch (error) {\n        console.error(`Error tracking ${eventType}:`, error);\n      }\n    }\n  };\n};\n\n// Setup cookies for analytics tracking\nexport const setupAnalyticsCookies = () => {\n  // Check if cookie consent is already set\n  const hasConsent = document.cookie.split(';').some(c => c.trim().startsWith('analytics_consent='));\n  \n  if (!hasConsent) {\n    // For demo purposes, we're auto-accepting cookies\n    const expiryDate = new Date();\n    expiryDate.setMonth(expiryDate.getMonth() + 6);\n    document.cookie = `analytics_consent=true; expires=${expiryDate.toUTCString()}; path=/; SameSite=Lax`;\n  }\n};\n","\nimport React, { useEffect } from 'react';\nimport { serviceProData } from '../../data/serviceProData';\nimport { Button } from \"@/components/ui/button\";\nimport UserMenu from '@/components/UserMenu';\nimport { useTemplateTheme } from '@/context/TemplateThemeContext';\nimport Navbar from '@/components/Navbar';\nimport { useWebsiteVisitAnalytics, setupAnalyticsCookies } from '@/hooks/useWebsiteVisitAnalytics';\nimport Footer from '@/components/Footer';\nimport { useLocation } from 'react-router-dom';\nimport { useCompanyData } from '@/context/CompanyDataContext';\n\nconst ServiceAbout = () => {\n  const location = useLocation();\n  const { templateType, colorClasses } = useTemplateTheme();\n  const { companyData } = useCompanyData();\n  const analytics = useWebsiteVisitAnalytics(true, 'service');\n  \n  // Set up analytics tracking\n  useEffect(() => {\n    setupAnalyticsCookies();\n  }, []);\n  \n  // Company name (from session storage or default)\n  const companyName = companyData?.companyName || 'ServicePro';\n  \n  // Came from saved websites?\n  const fromSavedWebsites = location.state && location.state.fromSavedWebsites;\n  \n  // Load saved content if available\n  const getSavedContent = () => {\n    try {\n      const contentKey = 'service_content';\n      const contentData = sessionStorage.getItem(contentKey);\n      if (contentData) {\n        return JSON.parse(contentData).about || null;\n      }\n    } catch (error) {\n      console.error('Error loading saved content:', error);\n    }\n    return null;\n  };\n  \n  const savedContent = getSavedContent();\n  \n  const navItems = [\n    { name: \"Home\", path: \"/service\" },\n    { name: \"About\", path: \"/service/about\" },\n    { name: \"Services\", path: \"/service/services\" },\n    { name: \"Blog\", path: \"/service/blog\" },\n    { name: \"Contact\", path: \"/service/contact\" },\n  ];\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <Navbar \n        logo={`${companyName}<span class='text-teal-600'>Pro</span>`}\n        basePath=\"service\"\n        navItems={navItems}\n        ctaText=\"Get Started\"\n        ctaLink=\"/service/contact\"\n      />\n\n      <div className=\"absolute top-4 right-8 z-50\">\n        <UserMenu isTemplate={true} templatePath=\"service\" />\n      </div>\n      \n      <div className=\"container mx-auto px-6 py-16\">\n        <div className=\"max-w-4xl mx-auto\">\n          <h1 className=\"text-3xl font-bold mb-6\">{savedContent?.title || \"About ServicePro\"}</h1>\n          \n          <div className=\"bg-white rounded-lg shadow-sm p-8 mb-10\">\n            <h2 className=\"text-2xl font-semibold mb-4 text-teal-700\">Our Story</h2>\n            <p className=\"text-gray-600 mb-6\">\n              {savedContent?.content || \"ServicePro was founded in 2020 with a simple mission: to provide businesses with the highest quality professional services and solutions. What started as a small team of dedicated professionals has grown into a thriving company serving clients across industries.\"}\n            </p>\n            <p className=\"text-gray-600 mb-6\">\n              {\"Our team brings decades of combined experience to every project, ensuring that we deliver results that exceed our clients' expectations. We're passionate about what we do and committed to helping our clients achieve their goals.\"}\n            </p>\n          </div>\n          \n          <div className=\"bg-white rounded-lg shadow-sm p-8 mb-10\">\n            <h2 className=\"text-2xl font-semibold mb-4 text-teal-700\">Our Mission</h2>\n            <p className=\"text-gray-600 mb-6\">\n              {savedContent?.mission || \"At ServicePro, our mission is to empower businesses through innovative solutions and exceptional service. We strive to be a trusted partner for our clients, helping them navigate challenges and seize opportunities in today's competitive landscape.\"}\n            </p>\n            <div className=\"flex items-center justify-center bg-gray-50 p-6 rounded-lg\">\n              <div className=\"text-center\">\n                <p className=\"text-xl font-semibold text-teal-600 italic\">\n                  \"Delivering excellence through professionalism, innovation, and integrity.\"\n                </p>\n              </div>\n            </div>\n          </div>\n          \n          <div className=\"bg-white rounded-lg shadow-sm p-8\">\n            <h2 className=\"text-2xl font-semibold mb-4 text-teal-700\">Our Team</h2>\n            <p className=\"text-gray-600 mb-8\">\n              {savedContent?.vision || \"Our team consists of experienced professionals from diverse backgrounds, united by a shared commitment to excellence and client satisfaction.\"}\n            </p>\n            \n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-8\">\n              {[1, 2, 3].map((member) => (\n                <div key={member} className=\"text-center\">\n                  <div className=\"w-32 h-32 bg-gray-200 rounded-full mx-auto mb-4\"></div>\n                  <h3 className=\"font-semibold text-lg\">Team Member {member}</h3>\n                  <p className={colorClasses.text}>Position Title</p>\n                  <p className=\"text-gray-500 mt-2\">\n                    Brief description of team member's experience and expertise.\n                  </p>\n                </div>\n              ))}\n            </div>\n          </div>\n        </div>\n      </div>\n      \n      <Footer\n        logo={companyName}\n        description={`About ${companyName} - Professional Services`}\n        basePath=\"service\"\n        navItems={navItems}\n        contactInfo={{\n          address: savedContent?.contact?.address || \"123 Business Street, City, ST 12345\",\n          email: savedContent?.contact?.email || \"contact@servicepro.com\",\n          phone: savedContent?.contact?.phone || \"(555) 123-4567\"\n        }}\n      />\n    </div>\n  );\n};\n\nexport default ServiceAbout;\n"],"names":["useWebsiteVisitAnalytics","isTemplate","templateId","location","useLocation","user","useAuth","useEffect","analyticsData","generateSessionId","supabase","analytics","error","existingSessionId","newSessionId","eventType","eventData","setupAnalyticsCookies","c","expiryDate","ServiceAbout","templateType","colorClasses","useTemplateTheme","companyData","useCompanyData","companyName","savedContent","contentData","navItems","jsxs","jsx","Navbar","UserMenu","member","Footer","_a","_b","_c"],"mappings":"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"}